from pithy import *
import json 

path = '/home/lab/EASI/data/'

pat = '''test7
test8
test9
test0
test1
test2
test3
test4'''

pat = pat.split('\n')

for nm in pat:
    tr = glob(path + "%s*TR*.json" % nm)
    tr.sort()
    pe = glob(path + "%s*PE*.json" % nm)
    pe.sort()
    
    print len(tr)
    print len(pe)
    
    bigdextr = []
    bigdexpe = []
    
    for i in tr:
        ts = i.split("_")[-1].replace(".json","")
        f = json.load(open(i))
        bigdextr.append(abs(array(f['amp'])-32639))
    for i in pe:
        ts = i.split("_")[-1].replace(".json","")
        f = json.load(open(i))
        bigdexpe.append(abs(array(f['amp'])-32639))
    
    #subplot(2,1,1)
    subplot(211)
    bigdextr = array(bigdextr).transpose()
    pod = imshow(bigdextr,aspect="auto")
    ylabel('TR')
    title(nm)
    xlim(0,len(tr))
    pod.clim(0,33000)
    
    subplot(212)
    # print nm
    poo = open(path + nm+'extime',"r").read().split(",")
    doo = []
    # print poo
    for p in poo:
        try:
            doo.append(float(p.strip()))
        except:
            pass
    plot(doo)
    ylabel('execution time')
    xlim(0,len(tr))
    #subplot(2,1,2)
    #bigdexpe = array(bigdexpe).transpose()
    #imshow(bigdexpe,aspect="auto")
    #ylabel('PE')
    #xlabel('index')
    
    showme()
    clf()