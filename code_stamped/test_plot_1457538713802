from pithy import *
import json 

path = '/Users/j125mini/EASI/data/'

pat = '''20160308-MotoATL-cells/20160308-MotoATL-cellA1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellA1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellA2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellA2-p2
20160308-MotoATL-cells/20160308-MotoATL-cellB1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellB1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellB2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellB2-p2
20160308-MotoATL-cells/20160308-MotoATL-cellC1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellC1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellC2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellC2-p2
20160308-MotoATL-cells/20160308-MotoATL-cellD1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellD1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellD2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellD2-p2
20160308-MotoATL-cells/20160308-MotoATL-cellE1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellE1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellE2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellE2-p2
20160308-MotoATL-cells/20160308-MotoATL-cellF1-p1
20160308-MotoATL-cells/20160308-MotoATL-cellF1-p2
20160308-MotoATL-cells/20160308-MotoATL-cellF2-p1
20160308-MotoATL-cells/20160308-MotoATL-cellF2-p2'''

#20160201 9:23 pm - ~348 reads

pat = pat.split('\n')

for nm in pat:
    # tr = glob(path + "%s*TR*.json" % nm)
    # tr.sort()
    pe = glob(path + "%s*PE*.json" % nm)
    pe.sort()
    
    # print len(tr)
    print len(pe)
    
    # bigdextr = []
    bigdexpe = []
    
    # for i in tr:
    #     ts = i.split("_")[-1].replace(".json","")
    #     f = json.load(open(i))
    #     bigdextr.append(abs(array(f['amp'])-32639))
    for i in pe:
        ts = i.split("_")[-1].replace(".json","")
        f = json.load(open(i))
        bigdexpe.append(abs(array(f['amp'])-32639))
    
    # subplot(211)
    # bigdextr = array(bigdextr).transpose()
    # pod = imshow(bigdextr,aspect="auto")
    # ylabel('TR')
    # title(nm)
    
    subplot(212)
    bigdexpe = array(bigdexpe).transpose()
    imshow(bigdexpe,aspect="auto")
    ylabel('PE')
    xlabel('index')
    
    showme()
    clf()