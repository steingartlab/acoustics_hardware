from pithy import *
import json 

path = '/home/lab/EASI/data/'

pat = "buttz1"

#a = glob(drop_pre+"/acousticdata_acee129/*.json")


a = glob(path + "%s*.json" % pat)
a.sort()

print len(a)
# quit()

# try: last = int(go("tail -n 1 %s.csv" % pat).split(",")[0])
# except: last = 0

bigdex = []
tus = []

for i in a:
    ts = i.split("_")[-1].replace(".json","")
    # if int(ts) > last:
    f = json.load(open(i))
    # print f['amp']
    bigdex.append(f['amp'])
    # open("%s.csv" % pat,'a').write(ts+","+data+"\n")
    # bigdex.append(list(abs(array(f['amp'])-127)-1))
    # tus.append(int(fil.split('_')[-1].replace('.json','')))
    
    
# data =  array([int(x) for x in data.split(',')])
# data = genfromtxt("%s.csv" % pat,delimiter=",",invalid_raise=False)

# data = data.T[1:]
# data = data.transpose()

# print data

imshow(bigdex,aspect="auto")
showme()
clf()