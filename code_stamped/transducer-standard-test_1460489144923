from pithy import *
import json 

path = '/Users/j125mini/EASI/data/standards/'

pat = '''PS-siui
Ac-siui
PS-olympus
Ac-olympus'''

# pat = "poooooooop"

pat = pat.split('\n')

for pul in ['TR','PE']:
    for nm in pat:
        top = glob(path + "%s*set1*%s*.json" % (nm,pul))
        top.sort()
        mid = glob(path + "%s*set2*%s*.json" % (nm,pul))
        mid.sort()
        bot = glob(path + "%s*set3*%s*.json" % (nm,pul))
        bot.sort()
        
        print len(top)
        print len(mid)
        print len(bot)
        
        bigdextop = []
        bigdexmid = []
        bigdexbot = []
        
        for i in top:
            ts = i.split("_")[-1].replace(".json","")
            f = json.load(open(i))
            bigdextop.append(abs(array(f['amp'])-127))
        for i in mid:
            ts = i.split("_")[-1].replace(".json","")
            f = json.load(open(i))
            bigdexmid.append(abs(array(f['amp'])-127))
        for i in bot:
            ts = i.split("_")[-1].replace(".json","")
            f = json.load(open(i))
            bigdexbot.append(abs(array(f['amp'])-127))
        
        subplot(311)
        bigdextop = array(bigdextop).transpose()
        plot(bigdextop)
        annotate('Transducer Set 1',xy=(350,100))
        ylabel('')
        title(nm)
        
        subplot(312)
        bigdexmid = array(bigdexmid).transpose()
        plot(bigdexmid)
        annotate('Transducer Set 1',xy=(350,100))
        ylabel('Stransducer Set 2')
        
        
        subplot(313)
        bigdexbot = array(bigdexbot).transpose()
        plot(bigdexbot)
        annotate('Transducer Set 1',xy=(350,100))
        ylabel('Transducer Set 3')
        xlabel('index')
        
        showme()
        clf()